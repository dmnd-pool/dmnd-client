"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[762],{285:(e,t,a)=>{a.d(t,{$:()=>s,r:()=>l});var n=a(5155);a(2115);var o=a(9708),r=a(2085),i=a(9434);let l=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function s(e){let{className:t,variant:a,size:r,asChild:s=!1,...c}=e,u=s?o.DX:"button";return(0,n.jsx)(u,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:r,className:t})),...c})}},937:(e,t,a)=>{a.d(t,{$j:()=>u,D$:()=>c,FC:()=>m,T3:()=>d,Xx:()=>p,le:()=>s,mt:()=>g});var n=a(3464),o=a(9434);let r=n.A.create({baseURL:"http://localhost:3001",timeout:1e4,headers:{"Content-Type":"application/json"}}),i=e=>{if("AbortError"===e.name)throw e;return{success:!1,message:"ECONNABORTED"===e.code?"Request timeout":e.message,data:null}},l=async(e,t)=>{try{var a;let n=await e();return{success:n.data.success,message:null!=(a=n.data.message)?a:null,data:t?t(n.data.data):n.data.data}}catch(e){return i(e)}},s=async e=>l(()=>r.get("/api/health",{signal:e}),e=>({status:e,timestamp:Date.now()})),c=async e=>l(()=>r.get("/api/pool/info",{signal:e}),e=>{var t,a;return{address:null!=(t=null==e?void 0:e.address)?t:"",latency:Number(null!=(a=null==e?void 0:e.latency)?a:0)}}),u=async e=>l(()=>r.get("/api/stats/miners",{signal:e}),e=>null!=e?e:{}),d=async e=>l(()=>r.get("/api/stats/aggregate",{signal:e}),e=>e?{total_connected_device:e.total_connected_device,total_hashrate:e.aggregate_hashrate,total_accepted_shares:e.aggregate_accepted_shares,total_rejected_shares:e.aggregate_rejected_shares,aggregate_diff:e.aggregate_diff}:null),m=async e=>l(()=>r.get("/api/stats/system",{signal:e}),e=>e?{cpu_usage:parseFloat(e["cpu_usage_%"]),memory_usage:(0,o.z3)(e.memory_usage_bytes)}:null),g=async e=>l(()=>r.get("/api/settings",{signal:e}),e=>e),p=async(e,t)=>l(()=>r.post("/api/settings",e,{signal:t}),e=>e)},3790:(e,t,a)=>{a.d(t,{SettingsProvider:()=>b,sA:()=>v,dq:()=>f,t0:()=>_});var n=a(5155),o=a(2115),r=a(937);let i={maximizeFees:"maximizeFees",maximizeCount:"maximize_count",balanced:"balanced"},l={maximizeFees:"maximizeFees",maximize_count:"maximizeCount",balanced:"balanced"},s=e=>{var t;return null!=(t=i[e])?t:"maximizeFees"},c=e=>{var t;return null!=(t=l[e])?t:"maximizeFees"},u=e=>({autoSelection:{onNewTemplate:{enabled:e.auto_selection_enabled,selectionStrategy:c(e.selection_strategy),minFeeRate:e.min_fee_rate,maxSize:e.max_size,minBaseFee:e.min_base_fee,maxAncestorCount:e.max_ancestor_count,maxDescendantCount:e.max_descendant_count,excludeBip125Replaceable:e.exclude_bip125_replaceable,excludeUnbroadcast:e.exclude_unbroadcast,maxTransactionCount:e.max_transaction_count,requireTemplate:e.require_template,clearExistingSelections:e.clear_existing_selections,periodicEnabled:e.periodic_enabled,periodicInterval:e.periodic_interval,autoJobDeclaration:e.auto_job_declaration}},general:{autoScrollToTable:e.auto_scroll_to_table,showNotifications:e.show_notifications,pauseOnSelection:e.pause_on_selection,clearSelectionOnJobDeclaration:e.clear_selection_on_job_declaration,autoCleanInvalidTransactions:e.auto_clean_invalid_transactions}}),d=e=>({auto_selection_enabled:e.autoSelection.onNewTemplate.enabled,selection_strategy:s(e.autoSelection.onNewTemplate.selectionStrategy),min_fee_rate:e.autoSelection.onNewTemplate.minFeeRate,max_size:e.autoSelection.onNewTemplate.maxSize,min_base_fee:e.autoSelection.onNewTemplate.minBaseFee,max_ancestor_count:e.autoSelection.onNewTemplate.maxAncestorCount,max_descendant_count:e.autoSelection.onNewTemplate.maxDescendantCount,exclude_bip125_replaceable:e.autoSelection.onNewTemplate.excludeBip125Replaceable,exclude_unbroadcast:e.autoSelection.onNewTemplate.excludeUnbroadcast,max_transaction_count:e.autoSelection.onNewTemplate.maxTransactionCount,require_template:e.autoSelection.onNewTemplate.requireTemplate,clear_existing_selections:e.autoSelection.onNewTemplate.clearExistingSelections,periodic_enabled:e.autoSelection.onNewTemplate.periodicEnabled,periodic_interval:e.autoSelection.onNewTemplate.periodicInterval,auto_job_declaration:e.autoSelection.onNewTemplate.autoJobDeclaration,auto_scroll_to_table:e.general.autoScrollToTable,show_notifications:e.general.showNotifications,pause_on_selection:e.general.pauseOnSelection,clear_selection_on_job_declaration:e.general.clearSelectionOnJobDeclaration,auto_clean_invalid_transactions:e.general.autoCleanInvalidTransactions}),m="jd-tx-selection-settings",g={autoSelection:{onNewTemplate:{enabled:!1,selectionStrategy:"maximizeFees",minFeeRate:1,maxSize:1e6,minBaseFee:0,maxAncestorCount:25,maxDescendantCount:25,excludeBip125Replaceable:!1,excludeUnbroadcast:!1,maxTransactionCount:100,requireTemplate:!1,clearExistingSelections:!0,periodicEnabled:!1,periodicInterval:30,autoJobDeclaration:!1}},general:{autoScrollToTable:!0,showNotifications:!0,pauseOnSelection:!1,clearSelectionOnJobDeclaration:!1,autoCleanInvalidTransactions:!0}},p=(0,o.createContext)(void 0);function b(e){let{children:t}=e,[a,i]=(0,o.useState)(g),[l,s]=(0,o.useState)(!0),[c,b]=(0,o.useState)(null),[_,v]=(0,o.useState)(!1),f=(0,o.useRef)(null);(0,o.useEffect)(()=>((async()=>{var e,t;try{s(!0),b(null),f.current=new AbortController;let t=await (0,r.mt)(f.current.signal);if(t.success&&t.data){let e=u(t.data);i(e)}else{let a=localStorage.getItem(m);if(a){let t=JSON.parse(a);i({...g,...t,autoSelection:{...g.autoSelection,...t.autoSelection,onNewTemplate:{...g.autoSelection.onNewTemplate,...null==(e=t.autoSelection)?void 0:e.onNewTemplate}},general:{...g.general,...t.general}})}else i(g);t.message&&console.warn("Settings API warning:",t.message)}}catch(e){if("AbortError"!==e.name){console.error("Failed to load settings:",e),b(e.message||"Failed to load settings");try{let e=localStorage.getItem(m);if(e){let a=JSON.parse(e);i({...g,...a,autoSelection:{...g.autoSelection,...a.autoSelection,onNewTemplate:{...g.autoSelection.onNewTemplate,...null==(t=a.autoSelection)?void 0:t.onNewTemplate}},general:{...g.general,...a.general}})}}catch(e){console.error("Failed to load from localStorage:",e),i(g)}}}finally{s(!1)}})(),()=>{f.current&&f.current.abort()}),[]),(0,o.useEffect)(()=>{if(!l)try{localStorage.setItem(m,JSON.stringify(a))}catch(e){console.error("Failed to save settings to localStorage:",e)}},[a,l]);let h=(0,o.useCallback)(e=>{var t;i({...a,...e,autoSelection:{...a.autoSelection,...e.autoSelection,onNewTemplate:{...a.autoSelection.onNewTemplate,...null==(t=e.autoSelection)?void 0:t.onNewTemplate}},general:{...a.general,...e.general}})},[a]),x=(0,o.useCallback)(async()=>{let e=Date.now();try{v(!0),b(null),f.current&&f.current.abort(),f.current=new AbortController;let t=d(a),n=await (0,r.Xx)(t,f.current.signal);if(!n.success)throw Error(n.message||"Failed to save settings");if(n.data){let e=u(n.data);i(e)}let o=Date.now()-e,l=Math.max(0,1e3-o);l>0&&await new Promise(e=>setTimeout(e,l))}catch(t){if("AbortError"!==t.name){console.error("Failed to save settings:",t),b(t.message||"Failed to save settings");let a=Math.max(0,1e3-(Date.now()-e));throw a>0&&await new Promise(e=>setTimeout(e,a)),t}}finally{v(!1)}},[a]),w=(0,o.useCallback)(async()=>{let e=Date.now();try{v(!0),b(null),f.current&&f.current.abort(),f.current=new AbortController;let t=d(g),a=await (0,r.Xx)(t,f.current.signal);if(a.success&&a.data){let e=u(a.data);i(e)}else i(g),a.message&&b(a.message);try{localStorage.removeItem(m)}catch(e){console.error("Failed to remove settings from localStorage:",e)}let n=Date.now()-e,o=Math.max(0,500-n);o>0&&await new Promise(e=>setTimeout(e,o))}catch(t){if("AbortError"!==t.name){console.error("Failed to reset settings:",t),b(t.message||"Failed to reset settings");let a=Math.max(0,500-(Date.now()-e));a>0&&await new Promise(e=>setTimeout(e,a)),i(g)}}finally{v(!1)}},[]);return(0,n.jsx)(p.Provider,{value:{settings:a,updateSettings:h,saveSettings:x,resetSettings:w,isLoading:l,error:c,isSaving:_},children:t})}function _(){let e=(0,o.useContext)(p);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}function v(){let{settings:e,updateSettings:t}=_();return{autoSelection:e.autoSelection,updateAutoSelection:a=>t({autoSelection:{...e.autoSelection,...a}})}}function f(){let{settings:e,updateSettings:t}=_();return{general:e.general,updateGeneral:a=>t({general:{...e.general,...a}})}}},5057:(e,t,a)=>{a.d(t,{J:()=>i});var n=a(5155);a(2115);var o=a(968),r=a(9434);function i(e){let{className:t,...a}=e;return(0,n.jsx)(o.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},9434:(e,t,a)=>{a.d(t,{Bf:()=>m,Cq:()=>u,FS:()=>i,Yq:()=>l,Yu:()=>p,cn:()=>r,qJ:()=>g,r6:()=>s,vD:()=>d,z3:()=>c});var n=a(2596),o=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,n.$)(t))}let i=e=>({txid:e.txid,vsize:e.vsize,weight:e.weight,time:e.time,height:e.height,descendant_count:e.descendant_count,descendant_size:e.descendant_size,ancestor_count:e.ancestor_count,ancestor_size:e.ancestor_size,wtxid:e.wtxid||e.txid,fees:{base:1e8*e.fees.base,modified:1e8*e.fees.modified,ancestor:1e8*e.fees.ancestor,descendant:1e8*e.fees.descendant},feeRate:1e8*e.fees.base/e.vsize,depends:e.depends||[],spent_by:e.spent_by||[],bip125_replaceable:e.bip125_replaceable,unbroadcast:e.unbroadcast});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";try{var a,n,o;return new Intl.DateTimeFormat("en-US",{month:null!=(a=t.month)?a:"long",day:null!=(n=t.day)?n:"numeric",year:null!=(o=t.year)?o:"numeric",...t}).format(new Date(e))}catch(e){return""}}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";try{var a,n,o,r,i,l;return new Intl.DateTimeFormat("en-US",{month:null!=(a=t.month)?a:"long",day:null!=(n=t.day)?n:"numeric",year:null!=(o=t.year)?o:"numeric",hour:null!=(r=t.hour)?r:"numeric",minute:null!=(i=t.minute)?i:"2-digit",second:t.second,hour12:null==(l=t.hour12)||l,...t}).format(new Date(e))}catch(e){return""}}function c(e){var t,a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{decimals:o=0,sizeType:r="normal"}=n;if(0===e)return"0 Byte";let i=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,i)).toFixed(o)," ").concat("accurate"===r?null!=(t=["Bytes","KiB","MiB","GiB","TiB"][i])?t:"Bytest":null!=(a=["Bytes","KB","MB","GB","TB"][i])?a:"Bytes")}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=1e12?"".concat((e/1e12).toFixed(t)," TH/s"):e>=1e9?"".concat((e/1e9).toFixed(t)," GH/s"):e>=1e6?"".concat((e/1e6).toFixed(t)," MH/s"):"".concat(e.toFixed(t)," H/s")}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{filename:a="transactions-".concat(new Date().toISOString().split("T")[0],".csv"),includeHeaders:n=!0}=t;try{let t=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=e.map(e=>[e.txid,"".concat(e.feeRate," sat/vB"),"".concat(e.fees.base," sat"),"".concat(e.vsize," vB"),s(e.time)]);return(t?[["Transaction ID","Fee Rate","Base Fee","Size","Time"],...a]:a).map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")}(e,n);await m(t,a)}catch(e){throw Error("Export failed")}}async function m(e,t){let a=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(a);try{let e=document.createElement("a");e.href=n,e.download=t,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(n)}}async function g(e){let t=e.map(e=>e.txid).join("\n");if(!navigator.clipboard)throw Error("Clipboard API not available");await navigator.clipboard.writeText(t)}async function p(e){let t=e.join("\n");if(!navigator.clipboard)throw Error("Clipboard API not available");await navigator.clipboard.writeText(t)}}}]);